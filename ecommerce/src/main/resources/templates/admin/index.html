<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layout :: html(title='Admin Dashboard - E-SHOP', content=~{::section})}">

<body>
    <section>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2>Product Management</h2>
            <a th:href="@{/admin/product/add}" class="btn btn-primary">Add New Product</a>
        </div>

        <table
            style="width: 100%; border-collapse: collapse; background: white; border-radius: 0.5rem; overflow: hidden; box-shadow: var(--card-shadow);">
            <thead style="background: #f1f5f9; text-align: left;">
                <tr>
                    <th style="padding: 1rem;">ID</th>
                    <th style="padding: 1rem;">Image</th>
                    <th style="padding: 1rem;">Name</th>
                    <th style="padding: 1rem;">Category</th>
                    <th style="padding: 1rem;">Price</th>
                    <th style="padding: 1rem;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="product : ${products}" style="border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 1rem;" th:text="${product.id}"></td>
                    <td style="padding: 1rem;">
                        <img th:src="${product.imagePath}"
                            style="width: 50px; height: 50px; object-fit: cover; border-radius: 0.25rem;">
                    </td>
                    <td style="padding: 1rem;" th:text="${product.name}"></td>
                    <td style="padding: 1rem;" th:text="${product.category != null ? product.category.name : 'N/A'}">
                    </td>
                    <td style="padding: 1rem;" th:text="${'â‚¹' + product.price}"></td>
                    <td style="padding: 1rem;">
                        <a th:href="@{/admin/product/edit/{id}(id=${product.id})}"
                            style="color: #2563eb; font-weight: 600; text-decoration: none; margin-right: 1rem;">Edit</a>
                        <a th:href="@{/admin/product/delete/{id}(id=${product.id})}"
                            style="color: #ef4444; font-weight: 600; text-decoration: none;"
                            onclick="return confirm('Are you sure?')">Delete</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
</body>

</html>